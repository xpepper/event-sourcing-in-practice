<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

	
  <title>Event sourcing in practice</title>
   <meta name="description" content="Learn about Event Sourcing and Command Sourcing as a persistance mechanism for Domain-Driven Design">
  <meta name="author" content="Johannes Seitz">


  <!-- Required stylesheet -->
  <link rel="stylesheet" href="./static/core/deck.core.css">
  <link rel="stylesheet" href="./static/custom.css">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="./static/960.css">
  <link rel="stylesheet" media="screen" href="./static/pygments-colorful.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/status/deck.status.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/hash/deck.hash.css">
  <link rel="stylesheet" media="screen" href="./static/extensions/scale/deck.scale.css">

  <!-- Style theme. More available in /themes/style/ or create your own. -->
  <link rel="stylesheet" media="screen" href="./static/themes/style/swiss.css">

  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="./static/themes/transition/horizontal-slide.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="./static/core/print.css">

  <!-- Required Modernizr file -->
  <script src="./static/modernizr.custom.js"></script>
</head>
<body>
  <div class="deck-container">

    <!-- Begin slides. Just make elements with a class of slide. -->

	
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;Event Sourcing &lt;br/&gt; in practice&lt;/h1&gt;\n&lt;header&gt;&lt;a href=&quot;https://github.com/xpepper/event-sourcing-in-practice&quot;&gt;&lt;img style=&quot;position: absolute; top: 0; right: 0; border: 0;&quot; src=&quot;https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png&quot; alt=&quot;Fork me on GitHub&quot;&gt;&lt;/a&gt;&lt;/header&gt;\n\n&lt;footer style=&quot;position:absolute;right:0px;bottom:20px&quot;&gt;\n    &lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by/4.0/&quot;&gt;&lt;img alt=&quot;Creative Commons License&quot; style=&quot;border-width:0&quot; src=&quot;static/img/cc.png&quot; /&gt;&lt;/a&gt;\n&lt;/footer&gt;&#39;, &#39;path&#39;: &#39;slides/00-title.md&#39;, &#39;title&#39;: &#39;title.md&#39;} -->
	    <section class="slide"  id="title.md" >
			
				
					<h1>Event Sourcing <br/> in practice</h1>
<header><a href="https://github.com/xpepper/event-sourcing-in-practice"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a></header>

<footer style="position:absolute;right:0px;bottom:20px">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="static/img/cc.png" /></a>
</footer>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Who we are&lt;/h2&gt;\n&lt;div class=&quot;container_12&quot;&gt;\n  &lt;div class=&quot;grid_6&quot;&gt;\n    &lt;h3&gt;Benjamin Reitzammer&lt;/h3&gt;\n    &lt;p&gt;CTO at Vaamo Finanz AG&lt;/p&gt;\n    &lt;img src=&quot;static/img/Reitzammer-Benjamin_dwxspeakerdetail.jpg&quot; style=&quot;float:left;padding-right:10px;&quot;/&gt;\n  &lt;/div&gt;\n  &lt;div class=&quot;grid_6&quot;&gt;\n    &lt;h3&gt;Johannes Seitz&lt;/h3&gt;\n    &lt;p&gt;Freelance Software Engineer&lt;/p&gt;\n    &lt;img src=&quot;static/img/Seitz-Johannes_dwxspeakerdetail.jpg&quot; style=&quot;float:left;padding-right:10px;&quot;/&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/01-who-we-are.md&#39;, &#39;title&#39;: &#39;who-we-are.md&#39;} -->
	    <section class="slide"  id="who-we-are.md" >
			
				
					<h2>Who we are</h2>
<div class="container_12">
  <div class="grid_6">
    <h3>Benjamin Reitzammer</h3>
    <p>CTO at Vaamo Finanz AG</p>
    <img src="static/img/Reitzammer-Benjamin_dwxspeakerdetail.jpg" style="float:left;padding-right:10px;"/>
  </div>
  <div class="grid_6">
    <h3>Johannes Seitz</h3>
    <p>Freelance Software Engineer</p>
    <img src="static/img/Seitz-Johannes_dwxspeakerdetail.jpg" style="float:left;padding-right:10px;"/>
  </div>
</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Who are you?&lt;/h2&gt;\n&lt;p&gt;Before we get started...&lt;/p&gt;\n&lt;ul&gt;\n&lt;li class=&quot;slide&quot;&gt;I have heard about Event Sourcing before&lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;I have been to one of the Event Sourcing/CQRS talks&lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;We do CQRS and/or Event Sourcing at work&lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;We do Domain-Driven Design&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/03-getting-to-know-you.md&#39;, &#39;title&#39;: &#39;getting-to-know-you.md&#39;} -->
	    <section class="slide"  id="getting-to-know-you.md" >
			
				
					<h2>Who are you?</h2>
<p>Before we get started...</p>
<ul>
<li class="slide">I have heard about Event Sourcing before</li>
<li class="slide">I have been to one of the Event Sourcing/CQRS talks</li>
<li class="slide">We do CQRS and/or Event Sourcing at work</li>
<li class="slide">We do Domain-Driven Design</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;This talk ...&lt;/h2&gt;\n&lt;p&gt;... is for you, if you want to ...&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;... understand the basic idea of ES&lt;/li&gt;\n&lt;li&gt;... know about the advantages of ES&lt;/li&gt;\n&lt;li&gt;... &lt;strong&gt;learn about the issues that come with ES&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;... understand when ES is a suitable pattern&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/04-structure.md&#39;, &#39;title&#39;: &#39;structure.md&#39;} -->
	    <section class="slide"  id="structure.md" >
			
				
					<h2>This talk ...</h2>
<p>... is for you, if you want to ...</p>
<ul>
<li>... understand the basic idea of ES</li>
<li>... know about the advantages of ES</li>
<li>... <strong>learn about the issues that come with ES</strong></li>
<li>... understand when ES is a suitable pattern</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;Event Sourcing vs Active Record&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/05-event-sourcing-vs-active-record/00-event-sourcing-vs-active-record.md&#39;, &#39;title&#39;: &#39;event-sourcing-vs-active-record/00-event-sourcing-vs-active-record.md&#39;} -->
	    <section class="slide"  id="event-sourcing-vs-active-record/00-event-sourcing-vs-active-record.md" >
			
				
					<h1>Event Sourcing vs Active Record</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Event Sourcing vs Active Record&lt;/h2&gt;\n&lt;p&gt;We all know Active Record:&lt;/p&gt;\n&lt;p class=&quot;slide&quot;&gt;&lt;img alt=&quot;Object-Relational mapping&quot; src=&quot;static/img/or-mapping.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/05-event-sourcing-vs-active-record/01-event-sourcing-vs-active-record.md&#39;, &#39;title&#39;: &#39;event-sourcing-vs-active-record/01-event-sourcing-vs-active-record.md&#39;} -->
	    <section class="slide"  id="event-sourcing-vs-active-record/01-event-sourcing-vs-active-record.md" >
			
				
					<h2>Event Sourcing vs Active Record</h2>
<p>We all know Active Record:</p>
<p class="slide"><img alt="Object-Relational mapping" src="static/img/or-mapping.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Event Sourcing is different&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Don\&#39;t save the &lt;strong&gt;current state&lt;/strong&gt; of objects&lt;/li&gt;\n&lt;li&gt;Save the &lt;strong&gt;events&lt;/strong&gt; that lead to the current state&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=&quot;slide&quot;&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Event&lt;/strong&gt;: Something that happend &lt;em&gt;in the past&lt;/em&gt;.&lt;/li&gt;\n&lt;li&gt;E.G. &lt;img alt=&quot;Deposit Performed Event in UML&quot; src=&quot;static/img/deposit-performed-event-v1.png&quot; /&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;!-- http://www.yuml.me/diagram/scruffy;/class/edit/[DepositPerformed|amount;accountNumber] --&gt;\n\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/05-event-sourcing-vs-active-record/03-event-sourcing-is-different.md&#39;, &#39;title&#39;: &#39;event-sourcing-vs-active-record/03-event-sourcing-is-different.md&#39;} -->
	    <section class="slide"  id="event-sourcing-vs-active-record/03-event-sourcing-is-different.md" >
			
				
					<h2>Event Sourcing is different</h2>
<ul>
<li>Don't save the <strong>current state</strong> of objects</li>
<li>Save the <strong>events</strong> that lead to the current state</li>
</ul>
<div class="slide">

<ul>
<li><strong>Event</strong>: Something that happend <em>in the past</em>.</li>
<li>E.G. <img alt="Deposit Performed Event in UML" src="static/img/deposit-performed-event-v1.png" /></li>
</ul>
<!-- http://www.yuml.me/diagram/scruffy;/class/edit/[DepositPerformed|amount;accountNumber] -->

</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;The advantages of Event Sourcing&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/06-event-sourcing-advantages/00-event-sourcing-advantages.md&#39;, &#39;title&#39;: &#39;event-sourcing-advantages/00-event-sourcing-advantages.md&#39;} -->
	    <section class="slide"  id="event-sourcing-advantages/00-event-sourcing-advantages.md" >
			
				
					<h1>The advantages of Event Sourcing</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;The advantages of Event Sourcing&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Complete log of every state change ever&lt;/li&gt;\n&lt;li&gt;Unmatched traceability and debugability&lt;/li&gt;\n&lt;li&gt;Very good performance characteristics&lt;/li&gt;\n&lt;li&gt;No more mapping objects to tables &lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/06-event-sourcing-advantages/01-all-advantages.md&#39;, &#39;title&#39;: &#39;event-sourcing-advantages/01-all-advantages.md&#39;} -->
	    <section class="slide"  id="event-sourcing-advantages/01-all-advantages.md" >
			
				
					<h2>The advantages of Event Sourcing</h2>
<ul>
<li>Complete log of every state change ever</li>
<li>Unmatched traceability and debugability</li>
<li>Very good performance characteristics</li>
<li>No more mapping objects to tables </li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Mapping objects to tables is suprisingly hard&lt;/h2&gt;\n&lt;div class=&quot;container_12&quot;&gt;\n    &lt;div class=&quot;grid_4&quot;&gt;\n        &lt;a href=&quot;http://martinfowler.com/books/eaa.html&quot;&gt;\n            &lt;img src=&quot;static/img/eaa.jpg&quot;&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;grid_8&quot;&gt;\n        &lt;ul&gt;\n            &lt;li&gt;143 pages on mapping objects to tables&lt;/li&gt;\n            &lt;li&gt;Recommends using ORM-Tools only for CRUD-heavy applications&lt;/li&gt;\n            &lt;li class=&quot;slide&quot;&gt;Why?&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/06-event-sourcing-advantages/02-mapping-O-to-R-is-hard.md&#39;, &#39;title&#39;: &#39;event-sourcing-advantages/02-mapping-O-to-R-is-hard.md&#39;} -->
	    <section class="slide"  id="event-sourcing-advantages/02-mapping-O-to-R-is-hard.md" >
			
				
					<h2>Mapping objects to tables is suprisingly hard</h2>
<div class="container_12">
    <div class="grid_4">
        <a href="http://martinfowler.com/books/eaa.html">
            <img src="static/img/eaa.jpg">
        </a>
    </div>
    <div class="grid_8">
        <ul>
            <li>143 pages on mapping objects to tables</li>
            <li>Recommends using ORM-Tools only for CRUD-heavy applications</li>
            <li class="slide">Why?</li>
        </ul>
    </div>
</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;The Object-Relational mismatch&lt;/h2&gt;\n&lt;p&gt;&lt;a href=&quot;https://twitter.com/unclebobmartin/status/384682249301811200&quot;&gt;&lt;img alt=&quot;The biggest problem with ORM\&#39;s is that they don\&#39;t really map O to R. Tables _are not_ objects. They never were; and never will be.&quot; src=&quot;static/img/uncle-bob-tweet.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/06-event-sourcing-advantages/03-uncle-bob-citation.md&#39;, &#39;title&#39;: &#39;event-sourcing-advantages/03-uncle-bob-citation.md&#39;} -->
	    <section class="slide"  id="event-sourcing-advantages/03-uncle-bob-citation.md" >
			
				
					<h2>The Object-Relational mismatch</h2>
<p><a href="https://twitter.com/unclebobmartin/status/384682249301811200"><img alt="The biggest problem with ORM's is that they don't really map O to R. Tables _are not_ objects. They never were; and never will be." src="static/img/uncle-bob-tweet.png" /></a></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;How does Event Sourcing work?&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/00-how-event-sourcing-works.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/00-how-event-sourcing-works.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/00-how-event-sourcing-works.md" >
			
				
					<h1>How does Event Sourcing work?</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Saving objects&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Create an event for every state change of the object:&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p class=&quot;slide&quot;&gt;&lt;img alt=&quot;Eventstream&quot; src=&quot;static/img/eventstream.png&quot; /&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li class=&quot;slide&quot;&gt;Persist this stream of events, preserving event order&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/03-saving-objects.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/03-saving-objects.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/03-saving-objects.md" >
			
				
					<h2>Saving objects</h2>
<ul>
<li>Create an event for every state change of the object:</li>
</ul>
<p class="slide"><img alt="Eventstream" src="static/img/eventstream.png" /></p>
<ul>
<li class="slide">Persist this stream of events, preserving event order</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Restoring objects&lt;/h2&gt;\n&lt;p&gt;Subsequently apply the events from the respective &lt;code&gt;EventStream&lt;/code&gt; to a &quot;blank&quot; object instance&lt;/p&gt;\n&lt;p&gt;&lt;img alt=&quot;Eventstream&quot; src=&quot;static/img/eventstream.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-0.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-0.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-0.md" >
			
				
					<h2>Restoring objects</h2>
<p>Subsequently apply the events from the respective <code>EventStream</code> to a "blank" object instance</p>
<p><img alt="Eventstream" src="static/img/eventstream.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Restoring objects&lt;/h2&gt;\n&lt;p&gt;&lt;img alt=&quot;Restore from EventStream 1&quot; src=&quot;static/img/restore-from-eventstream-1.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-1.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-1.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-1.md" >
			
				
					<h2>Restoring objects</h2>
<p><img alt="Restore from EventStream 1" src="static/img/restore-from-eventstream-1.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Restoring objects&lt;/h2&gt;\n&lt;p&gt;&lt;img alt=&quot;Restore from EventStream 2&quot; src=&quot;static/img/restore-from-eventstream-2.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-2.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-2.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-2.md" >
			
				
					<h2>Restoring objects</h2>
<p><img alt="Restore from EventStream 2" src="static/img/restore-from-eventstream-2.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Restoring objects&lt;/h2&gt;\n&lt;p&gt;&lt;img alt=&quot;Restore from EventStream 3&quot; src=&quot;static/img/restore-from-eventstream-3.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-3.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-3.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-3.md" >
			
				
					<h2>Restoring objects</h2>
<p><img alt="Restore from EventStream 3" src="static/img/restore-from-eventstream-3.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Restoring objects&lt;/h2&gt;\n&lt;p&gt;&lt;img alt=&quot;Restore from EventStream 4&quot; src=&quot;static/img/restore-from-eventstream-4.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-4.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-4.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-4.md" >
			
				
					<h2>Restoring objects</h2>
<p><img alt="Restore from EventStream 4" src="static/img/restore-from-eventstream-4.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;p&gt;&lt;img alt=&quot;Restore from EventStream 2&quot; src=&quot;static/img/restore-from-eventstream.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/04-restoring-objects-5.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/04-restoring-objects-5.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/04-restoring-objects-5.md" >
			
				
					<p><img alt="Restore from EventStream 2" src="static/img/restore-from-eventstream.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Updating objects&lt;/h2&gt;\n&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accountRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;123&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modifiedAccount&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;withdraw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Euro&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;\n&lt;span class=&quot;n&quot;&gt;accountRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modifiedAccount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n&lt;/pre&gt;&lt;/div&gt;\n\n\n&lt;p&gt;What should be persisted?&lt;/p&gt;\n&lt;p class=&quot;slide&quot;&gt;&lt;img alt=&quot;Updating EventStream&quot; src=&quot;static/img/eventstream-update.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/05-updating objects.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/05-updating objects.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/05-updating objects.md" >
			
				
					<h2>Updating objects</h2>
<div class="codehilite"><pre><span class="k">val</span> <span class="n">account</span> <span class="k">=</span> <span class="n">accountRepository</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">123</span><span class="o">)</span>
<span class="k">val</span> <span class="n">modifiedAccount</span> <span class="k">=</span> <span class="n">account</span><span class="o">.</span><span class="n">withdraw</span><span class="o">(</span><span class="k">new</span> <span class="nc">Euro</span><span class="o">(</span><span class="mi">10</span><span class="o">))</span>
<span class="n">accountRepository</span><span class="o">.</span><span class="n">save</span><span class="o">(</span><span class="n">modifiedAccount</span><span class="o">)</span>
</pre></div>


<p>What should be persisted?</p>
<p class="slide"><img alt="Updating EventStream" src="static/img/eventstream-update.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Deleting objects&lt;/h2&gt;\n&lt;p&gt;How do you delete an object?&lt;/p&gt;\n&lt;p  class=&quot;slide&quot;&gt;\n&lt;img src=&quot;static/img/bank-account-closed-event.png&quot; style=&quot;margin:0px&quot;/&gt;\n&lt;/p&gt;\n\n&lt;p class=&quot;slide&quot;&gt;&lt;a href=&quot;http://martinfowler.com/eaaDev/RetroactiveEvent.html&quot;&gt;Retroactive Event&lt;/a&gt;. An event undoing something that happened in the past&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/07-how-eventsourcing-works/06-deleting-objects.md&#39;, &#39;title&#39;: &#39;how-eventsourcing-works/06-deleting-objects.md&#39;} -->
	    <section class="slide"  id="how-eventsourcing-works/06-deleting-objects.md" >
			
				
					<h2>Deleting objects</h2>
<p>How do you delete an object?</p>
<p  class="slide">
<img src="static/img/bank-account-closed-event.png" style="margin:0px"/>
</p>

<p class="slide"><a href="http://martinfowler.com/eaaDev/RetroactiveEvent.html">Retroactive Event</a>. An event undoing something that happened in the past</p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;Making Event Sourcing work&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/00-making-eventsourcing-work.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/00-making-eventsourcing-work.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/00-making-eventsourcing-work.md" >
			
				
					<h1>Making Event Sourcing work</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Issues encountered in practice&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Event Sourcing &amp;amp; Command Sourcing confusion&lt;/li&gt;\n&lt;li&gt;Side-effects on event replay&lt;/li&gt;\n&lt;li&gt;Reporting and queries&lt;/li&gt;\n&lt;li&gt;Evolving events&lt;/li&gt;\n&lt;li&gt;Concurrent writes&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/01-issues-in-practice.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/01-issues-in-practice.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/01-issues-in-practice.md" >
			
				
					<h2>Issues encountered in practice</h2>
<ul>
<li>Event Sourcing &amp; Command Sourcing confusion</li>
<li>Side-effects on event replay</li>
<li>Reporting and queries</li>
<li>Evolving events</li>
<li>Concurrent writes</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Problem: Events vs Command&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Confusing Event Sourcing and Command Sourcing&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=&quot;container_12&quot;&gt;\n  &lt;div class=&quot;grid_6&quot;&gt;\n    &lt;h4&gt;Event Sourcing&lt;/h4&gt;\n    &lt;ul&gt;\n      &lt;li&gt;Persist only changes in state&lt;/li&gt;\n      &lt;li&gt;Replay can be side-effect free&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;img src=&quot;static/img/deposit-performed-event-v1.png&quot;/&gt;\n  &lt;/div&gt;\n  &lt;div class=&quot;grid_6&quot;&gt;\n    &lt;h4&gt;Command Sourcing&lt;/h4&gt;\n    &lt;ul&gt;\n      &lt;li&gt;Persist Commands&lt;/li&gt;\n      &lt;li&gt;Replay may trigger side-effects&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;img src=&quot;static/img/perform-deposit-command.png&quot;/&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/02-confusing-event-sourcing-with-command-sourcing.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/02-confusing-event-sourcing-with-command-sourcing.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/02-confusing-event-sourcing-with-command-sourcing.md" >
			
				
					<h2>Problem: Events vs Command</h2>
<ul>
<li>Confusing Event Sourcing and Command Sourcing</li>
</ul>
<div class="container_12">
  <div class="grid_6">
    <h4>Event Sourcing</h4>
    <ul>
      <li>Persist only changes in state</li>
      <li>Replay can be side-effect free</li>
    </ul>
    <img src="static/img/deposit-performed-event-v1.png"/>
  </div>
  <div class="grid_6">
    <h4>Command Sourcing</h4>
    <ul>
      <li>Persist Commands</li>
      <li>Replay may trigger side-effects</li>
    </ul>
    <img src="static/img/perform-deposit-command.png"/>
  </div>
</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Ex: Command&lt;/h2&gt;\n&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChangeOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;accountID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newOwner&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n\n  &lt;span class=&quot;k&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Command&lt;/span&gt;\n\n\n\n&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BankAccountCommandHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BankAccountRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;\n\n  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;changeOwner&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;ChangeOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;\n\n    &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accountId&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changeOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;accountID&lt;/span&gt;\n\n    &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newOwner&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changeOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newOwner&lt;/span&gt;\n\n    &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getAccount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;accountId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n\n    &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modifiedAccount&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;changeOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n\n    &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saveAccount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modifiedAccount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;\n\n  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;\n\n&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;\n&lt;/pre&gt;&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/03-command-sourcing-example.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/03-command-sourcing-example.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/03-command-sourcing-example.md" >
			
				
					<h2>Ex: Command</h2>
<div class="codehilite"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">ChangeOwner</span><span class="o">(</span><span class="n">accountID</span><span class="k">:</span> <span class="kt">UUID</span><span class="o">,</span> <span class="n">newOwner</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span>

  <span class="k">extends</span> <span class="nc">Command</span>



<span class="k">class</span> <span class="nc">BankAccountCommandHandler</span><span class="o">(</span><span class="n">repo</span><span class="k">:</span><span class="kt">BankAccountRepository</span><span class="o">)</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">handle</span><span class="o">(</span><span class="n">changeOwner</span><span class="k">:</span><span class="kt">ChangeOwner</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">val</span> <span class="n">accountId</span> <span class="k">=</span> <span class="n">changeOwner</span><span class="o">.</span><span class="n">accountID</span>

    <span class="k">val</span> <span class="n">newOwner</span> <span class="k">=</span> <span class="n">changeOwner</span><span class="o">.</span><span class="n">newOwner</span>

    <span class="k">val</span> <span class="n">account</span> <span class="k">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">)</span>

    <span class="k">val</span> <span class="n">modifiedAccount</span> <span class="k">=</span> <span class="n">account</span><span class="o">.</span><span class="n">changeOwner</span><span class="o">(</span><span class="n">newOwner</span><span class="o">)</span>

    <span class="n">repo</span><span class="o">.</span><span class="n">saveAccount</span><span class="o">(</span><span class="n">modifiedAccount</span><span class="o">)</span>

  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Problem: Side-effects&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;We don\&#39;t want side-effects to be replayed&lt;ul&gt;\n&lt;li&gt;E-Mails sent twice, orders placed etc.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=&quot;slide&quot;&gt;\n\n&lt;h3&gt;Solutions&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Solution 1: Separate side-effect and state change&lt;/li&gt;\n&lt;li&gt;Solution 2: Saving event triggers side-effect&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/04-side-effects.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/04-side-effects.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/04-side-effects.md" >
			
				
					<h2>Problem: Side-effects</h2>
<ul>
<li>We don't want side-effects to be replayed<ul>
<li>E-Mails sent twice, orders placed etc.</li>
</ul>
</li>
</ul>
<div class="slide">

<h3>Solutions</h3>
<ul>
<li>Solution 1: Separate side-effect and state change</li>
<li>Solution 2: Saving event triggers side-effect</li>
</ul>
</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Solution 1: Separate side-effect and state change&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;p&gt;Execute command on object. This triggers side-effects produces events&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;Command -&amp;gt; Object -&amp;gt; Events&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Applying Events causes state to change&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;Object -&amp;gt; Event -&amp;gt; Changed Object&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Only the event (=state change) is being replayed.&lt;/strong&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/05-separating-behaviour-and-state.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/05-separating-behaviour-and-state.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/05-separating-behaviour-and-state.md" >
			
				
					<h2>Solution 1: Separate side-effect and state change</h2>
<ul>
<li>
<p>Execute command on object. This triggers side-effects produces events</p>
<p><code>Command -&gt; Object -&gt; Events</code></p>
</li>
<li>
<p>Applying Events causes state to change</p>
<p><code>Object -&gt; Event -&gt; Changed Object</code></p>
</li>
</ul>
<p><strong>Only the event (=state change) is being replayed.</strong></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Solution 2: Saving events triggers side-effects&lt;/h2&gt;\n&lt;p&gt;When events are saved, side-effects are triggered by event-listeners&lt;/p&gt;\n&lt;p&gt;&lt;img alt=&quot;Savings triggers side-effect&quot; src=&quot;static/img/saving-triggers-event.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/06-events-saving-trigger-side-effects.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/06-events-saving-trigger-side-effects.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/06-events-saving-trigger-side-effects.md" >
			
				
					<h2>Solution 2: Saving events triggers side-effects</h2>
<p>When events are saved, side-effects are triggered by event-listeners</p>
<p><img alt="Savings triggers side-effect" src="static/img/saving-triggers-event.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Problem: Reporting &amp;amp; Queries&lt;/h2&gt;\n&lt;p&gt;The persisted event stream does not allow for database queries and reports&lt;/p&gt;\n&lt;div class=&quot;slide&quot;&gt;\n\n&lt;h3&gt;Solution&lt;/h3&gt;\n&lt;p&gt;Use events to create &quot;read models&quot;, optimised for queries and reports.&lt;/p&gt;\n&lt;p&gt;&lt;img alt=&quot;CQRS&quot; src=&quot;static/img/cqrs.png&quot; /&gt;\n&lt;a href=&quot;http://martinfowler.com/bliki/CQRS.html&quot;&gt;&lt;small&gt;Image by Martin Fowler&lt;/small&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/15-cqrs.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/15-cqrs.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/15-cqrs.md" >
			
				
					<h2>Problem: Reporting &amp; Queries</h2>
<p>The persisted event stream does not allow for database queries and reports</p>
<div class="slide">

<h3>Solution</h3>
<p>Use events to create "read models", optimised for queries and reports.</p>
<p><img alt="CQRS" src="static/img/cqrs.png" />
<a href="http://martinfowler.com/bliki/CQRS.html"><small>Image by Martin Fowler</small></a></p>
</div>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Problem: Evolving events&lt;/h2&gt;\n&lt;p&gt;How to evolve (immutable) events?&lt;/p&gt;\n&lt;h3 class=&quot;slide&quot;&gt;Reasons for change&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li class=&quot;slide&quot;&gt;Event no longer relevant (delete) &lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;Event fields change (edit) &lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;Event names change (rename) &lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 class=&quot;slide&quot;&gt;Solution&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li class=&quot;slide&quot;&gt;Rewrite events in Event Store&lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;Event update at runtime&lt;/li&gt;\n&lt;li class=&quot;slide&quot;&gt;Snapshotting&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/17-versioning-events.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/17-versioning-events.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/17-versioning-events.md" >
			
				
					<h2>Problem: Evolving events</h2>
<p>How to evolve (immutable) events?</p>
<h3 class="slide">Reasons for change</h3>
<ul>
<li class="slide">Event no longer relevant (delete) </li>
<li class="slide">Event fields change (edit) </li>
<li class="slide">Event names change (rename) </li>
</ul>
<h3 class="slide">Solution</h3>
<ul>
<li class="slide">Rewrite events in Event Store</li>
<li class="slide">Event update at runtime</li>
<li class="slide">Snapshotting</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Problem: Concurrent writes&lt;/h2&gt;\n&lt;p&gt;How to resolve race conditions that occur due to concurrent writes?&lt;/p&gt;\n&lt;h3&gt;Simple solution: Optimistic locking&lt;/h3&gt;\n&lt;p&gt;&lt;img alt=&quot;Savings triggers side-effect&quot; src=&quot;static/img/optimistic-locking.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/18-concurrent-modifictations.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/18-concurrent-modifictations.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/18-concurrent-modifictations.md" >
			
				
					<h2>Problem: Concurrent writes</h2>
<p>How to resolve race conditions that occur due to concurrent writes?</p>
<h3>Simple solution: Optimistic locking</h3>
<p><img alt="Savings triggers side-effect" src="static/img/optimistic-locking.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&quot;&lt;h2&gt;Summary&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Don&#39;t confuse Event Sourcing &amp;amp; Command Sourcing&lt;/li&gt;\n&lt;li&gt;Decide how to handle side-effects on event replay&lt;/li&gt;\n&lt;li&gt;Reporting and queries&lt;/li&gt;\n&lt;li&gt;Versioning of events&lt;/li&gt;\n&lt;li&gt;Concurrent writes&lt;/li&gt;\n&lt;/ul&gt;&quot;, &#39;path&#39;: &#39;slides/08-making-eventsourcing-work/25-summary.md&#39;, &#39;title&#39;: &#39;making-eventsourcing-work/25-summary.md&#39;} -->
	    <section class="slide"  id="making-eventsourcing-work/25-summary.md" >
			
				
					<h2>Summary</h2>
<ul>
<li>Don't confuse Event Sourcing &amp; Command Sourcing</li>
<li>Decide how to handle side-effects on event replay</li>
<li>Reporting and queries</li>
<li>Versioning of events</li>
<li>Concurrent writes</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;Considering Event Sourcing&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/09-considering-event-sourcing/00-considering-event-sourcing.md&#39;, &#39;title&#39;: &#39;considering-event-sourcing/00-considering-event-sourcing.md&#39;} -->
	    <section class="slide"  id="considering-event-sourcing/00-considering-event-sourcing.md" >
			
				
					<h1>Considering Event Sourcing</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Pros and Cons of Event/Command Sourcing&lt;/h2&gt;\n&lt;h3&gt;Pros&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Bypass the O-R impedance mismatch&lt;/li&gt;\n&lt;li&gt;Easy way to undo things&lt;/li&gt;\n&lt;li&gt;Debugability and traceability&lt;/li&gt;\n&lt;li&gt;After-the-fact data analysis of Event Streams&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Cons&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Takes getting used to&lt;/li&gt;\n&lt;li&gt;Much less framework/community/vendor support&lt;/li&gt;\n&lt;li&gt;Awkward queries (solved by CQRS)&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/09-considering-event-sourcing/01-pros-and-cons-of-event-sourcing.md&#39;, &#39;title&#39;: &#39;considering-event-sourcing/01-pros-and-cons-of-event-sourcing.md&#39;} -->
	    <section class="slide"  id="considering-event-sourcing/01-pros-and-cons-of-event-sourcing.md" >
			
				
					<h2>Pros and Cons of Event/Command Sourcing</h2>
<h3>Pros</h3>
<ul>
<li>Bypass the O-R impedance mismatch</li>
<li>Easy way to undo things</li>
<li>Debugability and traceability</li>
<li>After-the-fact data analysis of Event Streams</li>
</ul>
<h3>Cons</h3>
<ul>
<li>Takes getting used to</li>
<li>Much less framework/community/vendor support</li>
<li>Awkward queries (solved by CQRS)</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Debugging and accountability&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Every change to state is traceable&lt;/li&gt;\n&lt;li&gt;You know how the system got into the current state&lt;/li&gt;\n&lt;li&gt;Metadata like &quot;who did that&quot; and &quot;when did it happen&quot; &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;img alt=&quot;Eventstream&quot; src=&quot;static/img/eventstream.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/09-considering-event-sourcing/02-debugging-and-accountability.md&#39;, &#39;title&#39;: &#39;considering-event-sourcing/02-debugging-and-accountability.md&#39;} -->
	    <section class="slide"  id="considering-event-sourcing/02-debugging-and-accountability.md" >
			
				
					<h2>Debugging and accountability</h2>
<ul>
<li>Every change to state is traceable</li>
<li>You know how the system got into the current state</li>
<li>Metadata like "who did that" and "when did it happen" </li>
</ul>
<p><img alt="Eventstream" src="static/img/eventstream.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Mining of event streams&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Mining event streams for information&lt;/li&gt;\n&lt;li&gt;Example: recommendation engine, recommending items customers removed from their shopping cart&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://freakonomics.com/2010/08/16/superfreakonomics-book-club-can-a-bankers-algorithm-help-catch-would-be-terrorists/&quot;&gt;Hunt terrorists by analysing their financial transactions&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;img alt=&quot;Eventstream&quot; src=&quot;static/img/eventstream.png&quot; /&gt;&lt;/p&gt;&#39;, &#39;path&#39;: &#39;slides/09-considering-event-sourcing/03-mining-event-streams.md&#39;, &#39;title&#39;: &#39;considering-event-sourcing/03-mining-event-streams.md&#39;} -->
	    <section class="slide"  id="considering-event-sourcing/03-mining-event-streams.md" >
			
				
					<h2>Mining of event streams</h2>
<ul>
<li>Mining event streams for information</li>
<li>Example: recommendation engine, recommending items customers removed from their shopping cart</li>
<li><a href="http://freakonomics.com/2010/08/16/superfreakonomics-book-club-can-a-bankers-algorithm-help-catch-would-be-terrorists/">Hunt terrorists by analysing their financial transactions</a></li>
</ul>
<p><img alt="Eventstream" src="static/img/eventstream.png" /></p>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&quot;&lt;h2&gt;Should I be doing Event Sourcing?&lt;/h2&gt;\n&lt;p&gt;Event Sourcing is probably a good fit when ...&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;you&#39;re building rich object-oriented domain models (e.g. DDD) &lt;/li&gt;\n&lt;li&gt;you have a lot of behaviour that isn&#39;t CRUD&lt;/li&gt;\n&lt;li&gt;accountability/debugability is critical&lt;/li&gt;\n&lt;li&gt;you need version control/undo for data (e. G. Wikis, Google Docs)&lt;/li&gt;\n&lt;li&gt;your business derives value or competitive advantage from event data&lt;/li&gt;\n&lt;li&gt;your domain is inherently event driven (e. G. basketball game tracking)&lt;/li&gt;\n&lt;li&gt;you&#39;re building a scaleable system based on the CQRS pattern&lt;/li&gt;\n&lt;/ul&gt;&quot;, &#39;path&#39;: &#39;slides/09-considering-event-sourcing/04-should-i-be-doing-event-sourcing.md&#39;, &#39;title&#39;: &#39;considering-event-sourcing/04-should-i-be-doing-event-sourcing.md&#39;} -->
	    <section class="slide"  id="considering-event-sourcing/04-should-i-be-doing-event-sourcing.md" >
			
				
					<h2>Should I be doing Event Sourcing?</h2>
<p>Event Sourcing is probably a good fit when ...</p>
<ul>
<li>you're building rich object-oriented domain models (e.g. DDD) </li>
<li>you have a lot of behaviour that isn't CRUD</li>
<li>accountability/debugability is critical</li>
<li>you need version control/undo for data (e. G. Wikis, Google Docs)</li>
<li>your business derives value or competitive advantage from event data</li>
<li>your domain is inherently event driven (e. G. basketball game tracking)</li>
<li>you're building a scaleable system based on the CQRS pattern</li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Interesting Projects&lt;/h2&gt;\n&lt;p&gt;&lt;img src=&quot;static/img/ouro.png&quot; style=&quot;float:right;width:30%&quot;/&gt;&lt;/p&gt;\n&lt;h3&gt;Event Store&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Open Source database for Event Sourcing&lt;/li&gt;\n&lt;li&gt;Works on .Net/Mono&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/EventStore/eventstorejvmclient&quot;&gt;Early version of Java/Scala Bindings&lt;/a&gt; available&lt;/li&gt;\n&lt;li&gt;More Information on &lt;a href=&quot;http://geteventstore.com/&quot;&gt;geteventstore.com&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Akka Persistence&lt;/h3&gt;\n&lt;p&gt;&lt;img src=&quot;static/img/akka.png&quot; style=&quot;float:right;width:30%&quot;/&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Experimental extension for Akka&lt;/li&gt;\n&lt;li&gt;Runs on JVM&lt;/li&gt;\n&lt;li&gt;More Information available on &lt;a href=&quot;http://doc.akka.io/docs/akka/snapshot/java/persistence.html&quot;&gt;akka.io&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/10-interesting-projects/00-interesting-projects.md&#39;, &#39;title&#39;: &#39;interesting-projects/00-interesting-projects.md&#39;} -->
	    <section class="slide"  id="interesting-projects/00-interesting-projects.md" >
			
				
					<h2>Interesting Projects</h2>
<p><img src="static/img/ouro.png" style="float:right;width:30%"/></p>
<h3>Event Store</h3>
<ul>
<li>Open Source database for Event Sourcing</li>
<li>Works on .Net/Mono</li>
<li><a href="https://github.com/EventStore/eventstorejvmclient">Early version of Java/Scala Bindings</a> available</li>
<li>More Information on <a href="http://geteventstore.com/">geteventstore.com</a></li>
</ul>
<h3>Akka Persistence</h3>
<p><img src="static/img/akka.png" style="float:right;width:30%"/></p>
<ul>
<li>Experimental extension for Akka</li>
<li>Runs on JVM</li>
<li>More Information available on <a href="http://doc.akka.io/docs/akka/snapshot/java/persistence.html">akka.io</a></li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h1&gt;Thank you for your kind attention&lt;/h1&gt;&#39;, &#39;path&#39;: &#39;slides/98-thanks.md&#39;, &#39;title&#39;: &#39;thanks.md&#39;} -->
	    <section class="slide"  id="thanks.md" >
			
				
					<h1>Thank you for your kind attention</h1>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Sources and further reading&lt;/h2&gt;\n&lt;h3&gt;Event Sourcing theory&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.martinfowler.com/eaaDev/EventSourcing.html&quot;&gt;Martin Fowler on Event Sourcing&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.martinfowler.com/eaaDev/DomainEvent.html&quot;&gt;Martin Fowler on Domain Events&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Note: What Martin Fowler calls Domain Events, we came to recognise as Commands. The article &lt;a href=&quot;http://thinkbeforecoding.com/post/2013/07/28/Event-Sourcing-vs-Command-Sourcing&quot;&gt;Event Sourcing vs Command Sourcing&lt;/a&gt; explains the difference.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://vaughnvernon.co/?page_id=168&quot;&gt;Implementing Domain-Driven Design by Vaughn Vernom&lt;/a&gt; covers Event Sourcing in Appendix A&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Event sourcing implementation&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://abdullin.com/storage/uploads/2010/04/2010-04-16_DDDD_Drafts_by_Greg_Young.pdf&quot;&gt;DDDD by Greg Young&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://bliki.abdullin.com/event-sourcing/versioning&quot;&gt;Event versioning and evolutions&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/99-further-reading-1.md&#39;, &#39;title&#39;: &#39;further-reading-1.md&#39;} -->
	    <section class="slide"  id="further-reading-1.md" >
			
				
					<h2>Sources and further reading</h2>
<h3>Event Sourcing theory</h3>
<ul>
<li><a href="http://www.martinfowler.com/eaaDev/EventSourcing.html">Martin Fowler on Event Sourcing</a></li>
<li><a href="http://www.martinfowler.com/eaaDev/DomainEvent.html">Martin Fowler on Domain Events</a></li>
<li>Note: What Martin Fowler calls Domain Events, we came to recognise as Commands. The article <a href="http://thinkbeforecoding.com/post/2013/07/28/Event-Sourcing-vs-Command-Sourcing">Event Sourcing vs Command Sourcing</a> explains the difference.</li>
<li><a href="https://vaughnvernon.co/?page_id=168">Implementing Domain-Driven Design by Vaughn Vernom</a> covers Event Sourcing in Appendix A</li>
</ul>
<h3>Event sourcing implementation</h3>
<ul>
<li><a href="http://abdullin.com/storage/uploads/2010/04/2010-04-16_DDDD_Drafts_by_Greg_Young.pdf">DDDD by Greg Young</a></li>
<li><a href="http://bliki.abdullin.com/event-sourcing/versioning">Event versioning and evolutions</a></li>
</ul>
				
	  		
	    </section>
	
	    <!-- {&#39;markdown_content&#39;: u&#39;&lt;h2&gt;Sources and further reading&lt;/h2&gt;\n&lt;h3&gt;Command-Query Responsibility Segregation (CQRS)&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://skillsmatter.com/expert-profile/design-architecture/greg-young&quot;&gt;Greg Young on the Business Side of CQRS/ES&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/jj554200.aspx&quot;&gt;A CQRS Journey by Microsoft&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Example Projects&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/gregoryyoung/m-r&quot;&gt;Simple CQRS + Event Sourcing example&lt;/a&gt; Technology: Plain C# &lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/mspnp/cqrs-journey-code&quot;&gt;Microsoft\&#39;s CQRS Journey code&lt;/a&gt; Technology: C#/Azure&lt;/li&gt;\n&lt;/ul&gt;&#39;, &#39;path&#39;: &#39;slides/99-further-reading-2.md&#39;, &#39;title&#39;: &#39;further-reading-2.md&#39;} -->
	    <section class="slide"  id="further-reading-2.md" >
			
				
					<h2>Sources and further reading</h2>
<h3>Command-Query Responsibility Segregation (CQRS)</h3>
<ul>
<li><a href="http://skillsmatter.com/expert-profile/design-architecture/greg-young">Greg Young on the Business Side of CQRS/ES</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/jj554200.aspx">A CQRS Journey by Microsoft</a></li>
</ul>
<h3>Example Projects</h3>
<ul>
<li><a href="https://github.com/gregoryyoung/m-r">Simple CQRS + Event Sourcing example</a> Technology: Plain C# </li>
<li><a href="https://github.com/mspnp/cqrs-journey-code">Microsoft's CQRS Journey code</a> Technology: C#/Azure</li>
</ul>
				
	  		
	    </section>
	


    <!-- End slides. -->

  <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
    <a href="#" class="deck-next-link" title="Next">&#8594;</a>

    <!-- deck.status snippet -->
    <p class="deck-status">
      <span class="deck-status-current"></span>
      /
      <span class="deck-status-total"></span>
    </p>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
      <label for="goto-slide">Go to slide:</label>
      <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
      <datalist id="goto-datalist"></datalist>
      <input type="submit" value="Go">
    </form>

    <!-- deck.hash snippet -->
    <a href="." title="Permalink to this slide" class="deck-permalink">#</a>

    <!-- End extension snippets. -->
  </div>

<!-- Required JS files. -->
<script src="./static/jquery.min.js"></script>
<script src="./static/core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="./static/core/deck.core.js"></script>
<script src="./static/extensions/hash/deck.hash.js"></script>
<script src="./static/extensions/menu/deck.menu.js"></script>
<script src="./static/extensions/goto/deck.goto.js"></script>
<script src="./static/extensions/status/deck.status.js"></script>
<script src="./static/extensions/navigation/deck.navigation.js"></script>
<script src="./static/extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
  $(function() {
    $.deck('.slide');
  });
</script>
</body>
</html>

